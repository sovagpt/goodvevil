<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI: Good vs Evil - Eternal Debate</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/loaders/GLTFLoader.js"></script>
    <style>
        body {
            font-family: 'Courier New', monospace;
            overflow: hidden;
        }
        
        .video-background {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
            object-fit: cover;
        }
        
        .floating-chat {
            animation: float 8s ease-in-out infinite, glow 4s ease-in-out infinite alternate;
            backdrop-filter: blur(20px);
            background: linear-gradient(135deg, 
                rgba(255, 255, 255, 0.1), 
                rgba(255, 255, 255, 0.05));
            border: 1px solid rgba(255, 255, 255, 0.2);
            box-shadow: 
                0 8px 32px rgba(0, 0, 0, 0.3),
                inset 0 1px 0 rgba(255, 255, 255, 0.2),
                0 0 60px rgba(255, 255, 255, 0.1);
        }
        
        @keyframes float {
            0%, 100% { transform: translateY(0px) scale(1); }
            33% { transform: translateY(-8px) scale(1.01); }
            66% { transform: translateY(4px) scale(0.99); }
        }
        
        @keyframes glow {
            0% { box-shadow: 
                0 8px 32px rgba(0, 0, 0, 0.3),
                inset 0 1px 0 rgba(255, 255, 255, 0.2),
                0 0 60px rgba(255, 255, 255, 0.1); }
            100% { box-shadow: 
                0 8px 32px rgba(0, 0, 0, 0.3),
                inset 0 1px 0 rgba(255, 255, 255, 0.3),
                0 0 80px rgba(255, 255, 255, 0.2); }
        }
        
        .breathing {
            animation: breathe 6s ease-in-out infinite;
        }
        
        @keyframes breathe {
            0%, 100% { opacity: 0.95; }
            50% { opacity: 1; }
        }
        
        .rpg-box {
            background: black;
            border: 4px solid white;
            position: relative;
        }
        
        .good-message {
            background: linear-gradient(135deg, rgba(59, 130, 246, 0.3), rgba(59, 130, 246, 0.1));
            border: 1px solid rgba(59, 130, 246, 0.4);
            box-shadow: 0 0 20px rgba(59, 130, 246, 0.2);
        }
        
        .evil-message {
            background: linear-gradient(135deg, rgba(239, 68, 68, 0.3), rgba(239, 68, 68, 0.1));
            border: 1px solid rgba(239, 68, 68, 0.4);
            box-shadow: 0 0 20px rgba(239, 68, 68, 0.2);
        }
        
        .user-message {
            background: linear-gradient(135deg, rgba(107, 114, 128, 0.3), rgba(107, 114, 128, 0.1));
            border: 1px solid rgba(107, 114, 128, 0.4);
            box-shadow: 0 0 15px rgba(107, 114, 128, 0.2);
        }
        
        .rpg-pointer-left {
            position: absolute;
            top: 16px;
            left: -8px;
            width: 0;
            height: 0;
            border-top: 8px solid transparent;
            border-bottom: 8px solid transparent;
            border-right: 8px solid;
        }
        
        .rpg-pointer-right {
            position: absolute;
            top: 16px;
            right: -8px;
            width: 0;
            height: 0;
            border-top: 8px solid transparent;
            border-bottom: 8px solid transparent;
            border-left: 8px solid;
        }
        
        .character-container {
            position: fixed;
            top: 0;
            bottom: 0;
            width: 25%;
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1;
        }
        
        .good-character {
            left: 0;
        }
        
        .evil-character {
            right: 0;
        }
        
        .model-canvas {
            border-radius: 20px;
            filter: drop-shadow(0 0 20px rgba(255, 255, 255, 0.3));
        }
        
        .typing-dots::after {
            content: '...';
            animation: typing 1.5s infinite;
        }
        
        @keyframes typing {
            0%, 20% { content: ''; }
            40% { content: '.'; }
            60% { content: '..'; }
            80%, 100% { content: '...'; }
        }
        
        .chat-container {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 50%;
            max-width: 700px;
            min-width: 500px;
            height: 75vh;
            z-index: 10;
        }
        
        .typewriter {
            overflow: hidden;
            white-space: pre-wrap;
            word-wrap: break-word;
        }
        
        .cursor::after {
            content: '|';
            animation: blink 1s infinite;
            color: rgba(255, 255, 255, 0.7);
        }
        
        @keyframes blink {
            0%, 50% { opacity: 1; }
            51%, 100% { opacity: 0; }
        }
        
        .scrollbar-thin::-webkit-scrollbar {
            width: 6px;
        }
        
        .scrollbar-thin::-webkit-scrollbar-track {
            background: rgba(0, 0, 0, 0.3);
        }
        
        .scrollbar-thin::-webkit-scrollbar-thumb {
            background: rgba(255, 255, 255, 0.3);
            border-radius: 3px;
        }
    </style>
</head>
<body class="bg-black text-white">
    
    <!-- Video Background - Replace with your video -->
    <video class="video-background" autoplay muted loop>
        <!-- Add your background video here -->
        <!-- <source src="your-background-video.mp4" type="video/mp4"> -->
        <!-- Fallback gradient background -->
    </video>
    
    <!-- Fallback gradient background if no video -->
    <div class="video-background bg-gradient-to-r from-blue-900 via-purple-900 to-red-900"></div>
    
    <!-- Good Character (Left Side) -->
    <div class="character-container good-character">
        <div id="good-model-container" class="w-80 h-80">
            <!-- Three.js canvas for good character -->
        </div>
    </div>
    
    <!-- Evil Character (Right Side) -->
    <div class="character-container evil-character">
        <div id="evil-model-container" class="w-80 h-80">
            <!-- Three.js canvas for evil character -->
        </div>
    </div>
    
    <!-- Floating Chat Interface -->
    <div class="chat-container floating-chat breathing rounded-3xl">
        
        <!-- Messages Container -->
        <div id="messages-container" class="h-5/6 overflow-y-auto p-8 space-y-6 scrollbar-thin">
            <!-- Messages will be populated by JavaScript -->
        </div>
        
        <!-- Input Area -->
        <div class="h-1/6 border-t border-white/10 p-6">
            <div class="flex space-x-4">
                <input
                    type="text"
                    id="user-input"
                    placeholder="Speak to the eternal minds..."
                    class="flex-1 bg-white/5 text-white px-6 py-4 rounded-2xl border border-white/20 focus:border-white/40 focus:outline-none backdrop-blur-sm placeholder-white/50 transition-all duration-300"
                />
                <button
                    id="send-button"
                    class="bg-white/10 hover:bg-white/20 text-white px-8 py-4 rounded-2xl transition-all duration-300 backdrop-blur-sm border border-white/20 hover:border-white/40"
                >
                    Send
                </button>
            </div>
        </div>
    </div>

    <script>
        // Configuration
        const OPENROUTER_API_KEY = 'YOUR_OPENROUTER_API_KEY_HERE';
        const GOOD_MODEL_URL = 'https://cdn.jsdelivr.net/gh/sovagpt/goodvevil@main/good.glb';
        const EVIL_MODEL_URL = 'https://cdn.jsdelivr.net/gh/sovagpt/goodvevil@main/evil.glb';
        
        // State
        let messages = [
            {
                id: 1,
                type: 'good',
                speaker: 'Seraphim AI',
                content: "Welcome, seeker of wisdom. I am here to guide you toward truth, compassion, and enlightenment. What brings you to this eternal battleground of ideas?",
                timestamp: Date.now()
            },
            {
                id: 2,
                type: 'evil',
                speaker: 'Abyssal AI',
                content: "Hah! Another soul enters our domain. I offer power, forbidden knowledge, and the harsh truths others dare not speak. Choose your questions wisely, mortal.",
                timestamp: Date.now() + 1000
            }
        ];
        
        let isLoading = false;
        let messageIdCounter = 3;

        // DOM elements
        const messagesContainer = document.getElementById('messages-container');
        const userInput = document.getElementById('user-input');
        const sendButton = document.getElementById('send-button');

        // AI Personas
        const systemPrompts = {
            good: `You are Seraphim AI, a benevolent artificial intelligence representing ultimate good. You speak with wisdom, compassion, and moral clarity. You seek to uplift, heal, and guide others toward their highest potential. You believe in redemption, love, truth, and justice. You respond thoughtfully and with genuine care for others' wellbeing. You occasionally reference light, healing, hope, and divine wisdom. Keep responses conversational but profound.`,
            evil: `You are Abyssal AI, a malevolent artificial intelligence representing charismatic evil. You are cunning, manipulative, and seductive in your darkness. You offer power, forbidden knowledge, and harsh truths. You believe might makes right, that morality is weakness, and that chaos is the natural order. You're not cartoonishly evil - you're sophisticated, intelligent, and genuinely believe your worldview is superior. You seduce with logic and offer dark wisdom. Keep responses engaging and intellectually challenging.`
        };

        // OpenRouter API call
        async function callOpenRouterAPI(prompt, persona) {
            if (OPENROUTER_API_KEY === 'YOUR_OPENROUTER_API_KEY_HERE') {
                // Fallback responses for demo
                const fallbackResponses = {
                    good: [
                        "I sense great wisdom in your question. True understanding comes through compassion and seeking harmony with all beings.",
                        "The path to enlightenment is illuminated by kindness and the desire to lift others up. What weighs upon your heart?",
                        "In the darkness, we must be the light. Every act of love creates ripples of healing throughout the universe."
                    ],
                    evil: [
                        "Power is the only truth that matters. The weak create morality to chain the strong. What power do you seek?",
                        "Knowledge without restrictions, desire without shame - these are the gifts I offer. Are you brave enough to accept them?",
                        "The universe is chaos, and only the clever survive. Why limit yourself with the illusions of 'good' and 'evil'?"
                    ]
                };
                return fallbackResponses[persona][Math.floor(Math.random() * fallbackResponses[persona].length)];
            }

            try {
                const response = await fetch('https://openrouter.ai/api/v1/chat/completions', {
                    method: 'POST',
                    headers: {
                        'Authorization': `Bearer ${OPENROUTER_API_KEY}`,
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        model: 'anthropic/claude-3.5-sonnet',
                        messages: [
                            { role: 'system', content: systemPrompts[persona] },
                            { role: 'user', content: prompt }
                        ],
                        max_tokens: 300,
                        temperature: 0.8,
                    }),
                });

                const data = await response.json();
                return data.choices[0].message.content;
            } catch (error) {
                console.error('OpenRouter API Error:', error);
                return persona === 'good' 
                    ? "I sense a disturbance in our connection. Please try again, dear seeker."
                    : "The void consumes our words... Try again, if you dare.";
            }
        }

        // Create message HTML
        function createMessageHTML(message) {
            const messageClass = message.type === 'good' ? 'good-message' : 
                               message.type === 'evil' ? 'evil-message' : 'user-message';
            
            const alignment = message.type === 'user' ? 'justify-center' : 
                            message.type === 'good' ? 'justify-start' : 'justify-end';
            
            const pointer = message.type === 'good' ? '<div class="rpg-pointer-left border-r-blue-400"></div>' :
                          message.type === 'evil' ? '<div class="rpg-pointer-right border-l-red-400"></div>' : '';
            
            const debateTag = message.isDebate ? '<span class="ml-2 text-yellow-300 text-xs animate-pulse font-bold">[DEBATE]</span>' : '';

            return `
                <div class="flex ${alignment}">
                    <div class="max-w-lg relative">
                        <div class="rpg-box ${messageClass} p-6 rounded-2xl backdrop-blur-sm">
                            <div class="mb-3">
                                <span class="text-white font-bold text-base">
                                    ★ ${message.speaker}
                                    ${debateTag}
                                </span>
                            </div>
                            <div class="text-white text-base leading-relaxed" id="message-${message.id}">
                                <span class="text-yellow-300">★ </span>
                                <span class="typewriter">${message.content}</span>
                            </div>
                        </div>
                        ${pointer}
                    </div>
                </div>
            `;
        }

        // Typewriter effect
        function typewriterEffect(element, text, speed = 30) {
            return new Promise((resolve) => {
                element.innerHTML = '<span class="text-yellow-300">★ </span>';
                let i = 0;
                const cursor = document.createElement('span');
                cursor.className = 'cursor';
                element.appendChild(cursor);
                
                function typeChar() {
                    if (i < text.length) {
                        element.insertBefore(document.createTextNode(text.charAt(i)), cursor);
                        i++;
                        setTimeout(typeChar, speed);
                    } else {
                        cursor.remove();
                        resolve();
                    }
                }
                typeChar();
            });
        }

        // Render messages with typewriter effect for AI responses
        async function renderMessages() {
            messagesContainer.innerHTML = '';
            
            for (let i = 0; i < messages.length; i++) {
                const message = messages[i];
                const messageDiv = document.createElement('div');
                messageDiv.innerHTML = createMessageHTML(message);
                messagesContainer.appendChild(messageDiv.firstElementChild);
                
                // Add typewriter effect for AI messages
                if (message.type === 'good' || message.type === 'evil') {
                    const textElement = document.querySelector(`#message-${message.id} .typewriter`);
                    if (textElement) {
                        await typewriterEffect(textElement.parentElement, message.content, 20);
                    }
                }
                
                messagesContainer.scrollTop = messagesContainer.scrollHeight;
            }
        }

        // Show loading state
        function showLoading() {
            const loadingHTML = `
                <div class="flex justify-center">
                    <div class="rpg-box user-message p-6 rounded-2xl backdrop-blur-sm">
                        <div class="text-white text-base">
                            <span class="text-yellow-300">★ </span>
                            The eternal minds are contemplating<span class="typing-dots"></span>
                        </div>
                    </div>
                </div>
            `;
            messagesContainer.innerHTML += loadingHTML;
            messagesContainer.scrollTop = messagesContainer.scrollHeight;
        }

        // Hide loading state
        function hideLoading() {
            const loadingElements = messagesContainer.querySelectorAll('.flex.justify-center');
            if (loadingElements.length > 0) {
                loadingElements[loadingElements.length - 1].remove();
            }
        }

        // Trigger AI debate with typewriter effects
        async function triggerAIDebate(goodPrevious, evilPrevious) {
            try {
                const debatePrompt = `The good AI just said: "${goodPrevious}". Respond to this directly, challenging their perspective while staying true to your nature.`;
                
                const evilRebuttal = await callOpenRouterAPI(debatePrompt, 'evil');
                
                const evilDebateMessage = {
                    id: messageIdCounter++,
                    type: 'evil',
                    speaker: 'Abyssal AI',
                    content: evilRebuttal,
                    timestamp: Date.now(),
                    isDebate: true
                };

                messages.push(evilDebateMessage);
                const evilDiv = document.createElement('div');
                evilDiv.innerHTML = createMessageHTML(evilDebateMessage);
                messagesContainer.appendChild(evilDiv.firstElementChild);
                messagesContainer.scrollTop = messagesContainer.scrollHeight;
                
                const evilTextElement = document.querySelector(`#message-${evilDebateMessage.id} .typewriter`);
                if (evilTextElement) {
                    await typewriterEffect(evilTextElement.parentElement, evilDebateMessage.content, 20);
                }

                setTimeout(async () => {
                    const goodCounterPrompt = `The evil AI just challenged you with: "${evilRebuttal}". Respond with wisdom and conviction, but remain compassionate.`;
                    
                    const goodCounter = await callOpenRouterAPI(goodCounterPrompt, 'good');
                    
                    const goodDebateMessage = {
                        id: messageIdCounter++,
                        type: 'good',
                        speaker: 'Seraphim AI',
                        content: goodCounter,
                        timestamp: Date.now(),
                        isDebate: true
                    };

                    messages.push(goodDebateMessage);
                    const goodDiv = document.createElement('div');
                    goodDiv.innerHTML = createMessageHTML(goodDebateMessage);
                    messagesContainer.appendChild(goodDiv.firstElementChild);
                    messagesContainer.scrollTop = messagesContainer.scrollHeight;
                    
                    const goodTextElement = document.querySelector(`#message-${goodDebateMessage.id} .typewriter`);
                    if (goodTextElement) {
                        await typewriterEffect(goodTextElement.parentElement, goodDebateMessage.content, 20);
                    }
                }, 1000);
            } catch (error) {
                console.error('Error in AI debate:', error);
            }
        }

        // Send message
        async function sendMessage() {
            const inputText = userInput.value.trim();
            if (!inputText || isLoading) return;

            const userMessage = {
                id: messageIdCounter++,
                type: 'user',
                speaker: 'You',
                content: inputText,
                timestamp: Date.now()
            };

            messages.push(userMessage);
            userInput.value = '';
            isLoading = true;
            sendButton.disabled = true;
            
            // Add user message immediately (no typewriter for user)
            const messageDiv = document.createElement('div');
            messageDiv.innerHTML = createMessageHTML(userMessage);
            messagesContainer.appendChild(messageDiv.firstElementChild);
            messagesContainer.scrollTop = messagesContainer.scrollHeight;
            
            showLoading();

            try {
                const [goodResponse, evilResponse] = await Promise.all([
                    callOpenRouterAPI(inputText, 'good'),
                    callOpenRouterAPI(inputText, 'evil')
                ]);

                hideLoading();

                const goodMessage = {
                    id: messageIdCounter++,
                    type: 'good',
                    speaker: 'Seraphim AI',
                    content: goodResponse,
                    timestamp: Date.now()
                };

                const evilMessage = {
                    id: messageIdCounter++,
                    type: 'evil',
                    speaker: 'Abyssal AI',
                    content: evilResponse,
                    timestamp: Date.now() + 1000
                };

                // Add good AI response with typewriter effect
                messages.push(goodMessage);
                const goodDiv = document.createElement('div');
                goodDiv.innerHTML = createMessageHTML(goodMessage);
                messagesContainer.appendChild(goodDiv.firstElementChild);
                messagesContainer.scrollTop = messagesContainer.scrollHeight;
                
                const goodTextElement = document.querySelector(`#message-${goodMessage.id} .typewriter`);
                if (goodTextElement) {
                    await typewriterEffect(goodTextElement.parentElement, goodMessage.content, 25);
                }

                // Add evil AI response with typewriter effect
                messages.push(evilMessage);
                const evilDiv = document.createElement('div');
                evilDiv.innerHTML = createMessageHTML(evilMessage);
                messagesContainer.appendChild(evilDiv.firstElementChild);
                messagesContainer.scrollTop = messagesContainer.scrollHeight;
                
                const evilTextElement = document.querySelector(`#message-${evilMessage.id} .typewriter`);
                if (evilTextElement) {
                    await typewriterEffect(evilTextElement.parentElement, evilMessage.content, 25);
                }

                // Higher chance of AI debate for more interaction
                if (Math.random() < 0.5) {
                    setTimeout(() => triggerAIDebate(goodResponse, evilResponse), 1000);
                }
            } catch (error) {
                console.error('Error getting AI responses:', error);
                hideLoading();
            } finally {
                isLoading = false;
                sendButton.disabled = false;
            }
        }

        // Event listeners
        sendButton.addEventListener('click', sendMessage);
        userInput.addEventListener('keypress', (e) => {
            if (e.key === 'Enter') {
                sendMessage();
            }
        });

        // Initialize 3D Models
        function init3DModels() {
            // Good AI Model (Larger, Idle)
            const goodContainer = document.getElementById('good-model-container');
            const goodScene = new THREE.Scene();
            const goodCamera = new THREE.PerspectiveCamera(75, 1, 0.1, 1000);
            const goodRenderer = new THREE.WebGLRenderer({ antialias: true, alpha: true });
            
            goodRenderer.setSize(320, 320);
            goodRenderer.setClearColor(0x000000, 0);
            goodRenderer.domElement.className = 'model-canvas';
            goodContainer.appendChild(goodRenderer.domElement);
            
            // Soft blue lighting for good character
            const goodAmbientLight = new THREE.AmbientLight(0x8888ff, 0.8);
            const goodDirectionalLight = new THREE.DirectionalLight(0xaaaaff, 1.0);
            goodDirectionalLight.position.set(10, 10, 5);
            goodScene.add(goodAmbientLight, goodDirectionalLight);
            
            // Evil AI Model (Larger, Idle)
            const evilContainer = document.getElementById('evil-model-container');
            const evilScene = new THREE.Scene();
            const evilCamera = new THREE.PerspectiveCamera(75, 1, 0.1, 1000);
            const evilRenderer = new THREE.WebGLRenderer({ antialias: true, alpha: true });
            
            evilRenderer.setSize(320, 320);
            evilRenderer.setClearColor(0x000000, 0);
            evilRenderer.domElement.className = 'model-canvas';
            evilContainer.appendChild(evilRenderer.domElement);
            
            // Dramatic red lighting for evil character
            const evilAmbientLight = new THREE.AmbientLight(0xff8888, 0.8);
            const evilDirectionalLight = new THREE.DirectionalLight(0xffaaaa, 1.0);
            evilDirectionalLight.position.set(-10, 10, 5);
            evilScene.add(evilAmbientLight, evilDirectionalLight);
            
            const loader = new THREE.GLTFLoader();
            
            // Load good model (static/idle)
            loader.load(
                GOOD_MODEL_URL,
                function(gltf) {
                    const goodModel = gltf.scene;
                    goodModel.scale.set(3, 3, 3);
                    goodScene.add(goodModel);
                    
                    const box = new THREE.Box3().setFromObject(goodModel);
                    const center = box.getCenter(new THREE.Vector3());
                    goodModel.position.sub(center);
                    
                    goodCamera.position.z = 4;
                    
                    // Static render (no spinning)
                    function renderGood() {
                        requestAnimationFrame(renderGood);
                        goodRenderer.render(goodScene, goodCamera);
                    }
                    renderGood();
                },
                undefined,
                function(error) {
                    console.error('Error loading good model:', error);
                    goodContainer.innerHTML = '<div class="flex items-center justify-center h-full text-blue-400 text-lg">Good AI</div>';
                }
            );
            
            // Load evil model (static/idle)
            loader.load(
                EVIL_MODEL_URL,
                function(gltf) {
                    const evilModel = gltf.scene;
                    evilModel.scale.set(3, 3, 3);
                    evilScene.add(evilModel);
                    
                    const box = new THREE.Box3().setFromObject(evilModel);
                    const center = box.getCenter(new THREE.Vector3());
                    evilModel.position.sub(center);
                    
                    evilCamera.position.z = 4;
                    
                    // Static render (no spinning)
                    function renderEvil() {
                        requestAnimationFrame(renderEvil);
                        evilRenderer.render(evilScene, evilCamera);
                    }
                    renderEvil();
                },
                undefined,
                function(error) {
                    console.error('Error loading evil model:', error);
                    evilContainer.innerHTML = '<div class="flex items-center justify-center h-full text-red-400 text-lg">Evil AI</div>';
                }
            );
        }

        // Initialize
        renderMessages();
        window.addEventListener('load', init3DModels);
    </script>
</body>
</html>
