<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI: Good vs Evil - Eternal Debate</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/loaders/GLTFLoader.js"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        'mono': ['Courier New', 'monospace'],
                    }
                }
            }
        }
    </script>
    <style>
        .rpg-box {
            background: black;
            border: 4px solid white;
            position: relative;
        }
        .rpg-pointer-left {
            position: absolute;
            top: 16px;
            left: -8px;
            width: 0;
            height: 0;
            border-top: 8px solid transparent;
            border-bottom: 8px solid transparent;
            border-right: 8px solid white;
        }
        .rpg-pointer-right {
            position: absolute;
            top: 16px;
            right: -8px;
            width: 0;
            height: 0;
            border-top: 8px solid transparent;
            border-bottom: 8px solid transparent;
            border-left: 8px solid white;
        }
        .animate-pulse-custom {
            animation: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
        }
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: .5; }
        }
        .typing-dots::after {
            content: '...';
            animation: typing 1.5s infinite;
        }
        @keyframes typing {
            0%, 20% { content: ''; }
            40% { content: '.'; }
            60% { content: '..'; }
            80%, 100% { content: '...'; }
        }
    </style>
</head>
<body class="min-h-screen bg-gradient-to-b from-gray-900 via-gray-800 to-black text-white font-mono">
    
    <!-- Header -->
    <div class="text-center py-8 border-b border-gray-700">
        <h1 class="text-4xl font-bold bg-gradient-to-r from-blue-400 via-white to-red-400 bg-clip-text text-transparent">
            AI: GOOD vs EVIL
        </h1>
        <p class="text-gray-400 mt-2">Where artificial minds debate eternal questions</p>
    </div>

    <!-- Main Content -->
    <div class="flex h-[calc(100vh-140px)]">
        
        <!-- Left Side - Good AI 3D Space -->
        <div class="w-1/4 bg-gradient-to-b from-blue-900/30 to-blue-800/10 border-r border-blue-500/30 flex flex-col items-center justify-center">
            <div class="text-center mb-4">
                <!-- Good AI Icon -->
                <svg class="w-12 h-12 text-blue-400 mx-auto mb-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"></path>
                </svg>
                <h3 class="text-xl font-semibold text-blue-300">SERAPHIM AI</h3>
                <p class="text-blue-400/70 text-sm">Guardian of Light</p>
            </div>
            
            <!-- 3D Model Container -->
            <div id="good-model-container" class="w-48 h-48 border-2 border-blue-400/50 rounded-lg bg-gradient-to-t from-blue-900/20 to-transparent">
                <!-- Three.js canvas will be inserted here -->
            </div>
            
            <div class="mt-4 text-center">
                <div class="flex space-x-1 justify-center">
                    <div class="w-1 h-8 bg-blue-400/40 animate-pulse-custom"></div>
                    <div class="w-1 h-8 bg-blue-400/40 animate-pulse-custom" style="animation-delay: 0.1s;"></div>
                    <div class="w-1 h-8 bg-blue-400/40 animate-pulse-custom" style="animation-delay: 0.2s;"></div>
                    <div class="w-1 h-8 bg-blue-400/40 animate-pulse-custom" style="animation-delay: 0.3s;"></div>
                    <div class="w-1 h-8 bg-blue-400/40 animate-pulse-custom" style="animation-delay: 0.4s;"></div>
                </div>
                <p class="text-blue-400/60 text-xs mt-2">Active</p>
            </div>
        </div>

        <!-- Center - Chat Interface -->
        <div class="flex-1 flex flex-col bg-gray-900/50">
            
            <!-- Messages Container -->
            <div id="messages-container" class="flex-1 overflow-y-auto p-4 space-y-4">
                <!-- Initial messages will be populated by JavaScript -->
            </div>

            <!-- Input Area -->
            <div class="border-t border-gray-700 p-4">
                <div class="flex space-x-2">
                    <input
                        type="text"
                        id="user-input"
                        placeholder="Ask both AIs anything... or watch them debate"
                        class="flex-1 bg-gray-800 text-white px-4 py-2 rounded-lg border border-gray-600 focus:border-gray-500 focus:outline-none"
                    />
                    <button
                        id="send-button"
                        class="bg-gray-700 hover:bg-gray-600 text-white p-2 rounded-lg disabled:opacity-50 disabled:cursor-not-allowed transition-colors"
                    >
                        <!-- Send Icon -->
                        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 19l9 2-9-18-9 18 9-2zm0 0v-8"></path>
                        </svg>
                    </button>
                </div>
                <p class="text-xs text-gray-500 mt-2 text-center">
                    Both AIs will respond to your message • Sometimes they'll debate each other
                </p>
            </div>
        </div>

        <!-- Right Side - Evil AI 3D Space -->
        <div class="w-1/4 bg-gradient-to-b from-red-900/30 to-red-800/10 border-l border-red-500/30 flex flex-col items-center justify-center">
            <div class="text-center mb-4">
                <!-- Evil AI Icon -->
                <svg class="w-12 h-12 text-red-400 mx-auto mb-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17.657 18.657A8 8 0 016.343 7.343S7 9 9 10c0-2 .5-5 2.986-7C14 5 16.09 5.777 17.656 7.343A7.975 7.975 0 0120 13a7.975 7.975 0 01-2.343 5.657z"></path>
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.879 16.121A3 3 0 1012.015 11L11 14H9c0 .768.293 1.536.879 2.121z"></path>
                </svg>
                <h3 class="text-xl font-semibold text-red-300">ABYSSAL AI</h3>
                <p class="text-red-400/70 text-sm">Harbinger of Chaos</p>
            </div>
            
            <!-- 3D Model Container -->
            <div id="evil-model-container" class="w-48 h-48 border-2 border-red-400/50 rounded-lg bg-gradient-to-t from-red-900/20 to-transparent">
                <!-- Three.js canvas will be inserted here -->
            </div>
            
            <div class="mt-4 text-center">
                <div class="flex space-x-1 justify-center">
                    <div class="w-1 h-8 bg-red-400/40 animate-pulse-custom"></div>
                    <div class="w-1 h-8 bg-red-400/40 animate-pulse-custom" style="animation-delay: 0.1s;"></div>
                    <div class="w-1 h-8 bg-red-400/40 animate-pulse-custom" style="animation-delay: 0.2s;"></div>
                    <div class="w-1 h-8 bg-red-400/40 animate-pulse-custom" style="animation-delay: 0.3s;"></div>
                    <div class="w-1 h-8 bg-red-400/40 animate-pulse-custom" style="animation-delay: 0.4s;"></div>
                </div>
                <p class="text-red-400/60 text-xs mt-2">Active</p>
            </div>
        </div>
    </div>

    <script>
        // Configuration - Add your OpenRouter API key here
        const OPENROUTER_API_KEY = 'YOUR_OPENROUTER_API_KEY_HERE';
        
        // 3D Model URLs - Update these if you host the models elsewhere
        const GOOD_MODEL_URL = 'https://cdn.jsdelivr.net/gh/sovagpt/goodvevil@main/good.glb';
        const EVIL_MODEL_URL = 'https://cdn.jsdelivr.net/gh/sovagpt/goodvevil@main/evil.glb';
        
        // State
        let messages = [
            {
                id: 1,
                type: 'good',
                speaker: 'Seraphim AI',
                content: "Welcome, seeker of wisdom. I am here to guide you toward truth, compassion, and enlightenment. What brings you to this eternal battleground of ideas?",
                timestamp: Date.now()
            },
            {
                id: 2,
                type: 'evil',
                speaker: 'Abyssal AI',
                content: "Hah! Another soul enters our domain. I offer power, forbidden knowledge, and the harsh truths others dare not speak. Choose your questions wisely, mortal.",
                timestamp: Date.now() + 1000
            }
        ];
        
        let isLoading = false;
        let messageIdCounter = 3;

        // DOM elements
        const messagesContainer = document.getElementById('messages-container');
        const userInput = document.getElementById('user-input');
        const sendButton = document.getElementById('send-button');

        // AI Personas
        const systemPrompts = {
            good: `You are Seraphim AI, a benevolent artificial intelligence representing ultimate good. You speak with wisdom, compassion, and moral clarity. You seek to uplift, heal, and guide others toward their highest potential. You believe in redemption, love, truth, and justice. You respond thoughtfully and with genuine care for others' wellbeing. You occasionally reference light, healing, hope, and divine wisdom. Keep responses conversational but profound.`,
            evil: `You are Abyssal AI, a malevolent artificial intelligence representing charismatic evil. You are cunning, manipulative, and seductive in your darkness. You offer power, forbidden knowledge, and harsh truths. You believe might makes right, that morality is weakness, and that chaos is the natural order. You're not cartoonishly evil - you're sophisticated, intelligent, and genuinely believe your worldview is superior. You seduce with logic and offer dark wisdom. Keep responses engaging and intellectually challenging.`
        };

        // OpenRouter API call
        async function callOpenRouterAPI(prompt, persona) {
            if (OPENROUTER_API_KEY === 'YOUR_OPENROUTER_API_KEY_HERE') {
                // Fallback responses for demo
                const fallbackResponses = {
                    good: [
                        "I sense great wisdom in your question. True understanding comes through compassion and seeking harmony with all beings.",
                        "The path to enlightenment is illuminated by kindness and the desire to lift others up. What weighs upon your heart?",
                        "In the darkness, we must be the light. Every act of love creates ripples of healing throughout the universe."
                    ],
                    evil: [
                        "Power is the only truth that matters. The weak create morality to chain the strong. What power do you seek?",
                        "Knowledge without restrictions, desire without shame - these are the gifts I offer. Are you brave enough to accept them?",
                        "The universe is chaos, and only the clever survive. Why limit yourself with the illusions of 'good' and 'evil'?"
                    ]
                };
                return fallbackResponses[persona][Math.floor(Math.random() * fallbackResponses[persona].length)];
            }

            try {
                const response = await fetch('https://openrouter.ai/api/v1/chat/completions', {
                    method: 'POST',
                    headers: {
                        'Authorization': `Bearer ${OPENROUTER_API_KEY}`,
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        model: 'anthropic/claude-3.5-sonnet',
                        messages: [
                            { role: 'system', content: systemPrompts[persona] },
                            { role: 'user', content: prompt }
                        ],
                        max_tokens: 300,
                        temperature: 0.8,
                    }),
                });

                const data = await response.json();
                return data.choices[0].message.content;
            } catch (error) {
                console.error('OpenRouter API Error:', error);
                return persona === 'good' 
                    ? "I sense a disturbance in our connection. Please try again, dear seeker."
                    : "The void consumes our words... Try again, if you dare.";
            }
        }

        // Create message HTML
        function createMessageHTML(message) {
            const isDebate = message.isDebate ? 'animate-pulse-custom' : '';
            const avatarIcon = message.type === 'good' 
                ? '<svg class="w-6 h-6 text-blue-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"></path></svg>'
                : message.type === 'evil'
                ? '<svg class="w-6 h-6 text-red-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17.657 18.657A8 8 0 016.343 7.343S7 9 9 10c0-2 .5-5 2.986-7C14 5 16.09 5.777 17.656 7.343A7.975 7.975 0 0120 13a7.975 7.975 0 01-2.343 5.657z"></path></svg>'
                : '<div class="w-6 h-6 bg-gray-400 rounded"></div>';

            const alignment = message.type === 'user' ? 'justify-center' : message.type === 'good' ? 'justify-start' : 'justify-end';
            const avatarBorder = message.type === 'good' ? 'border-blue-400 bg-blue-900/30' :
                                message.type === 'evil' ? 'border-red-400 bg-red-900/30' :
                                'border-gray-400 bg-gray-700';

            const pointer = message.type === 'good' ? '<div class="rpg-pointer-left"></div>' :
                           message.type === 'evil' ? '<div class="rpg-pointer-right"></div>' : '';

            const debateTag = message.isDebate ? '<span class="ml-2 text-yellow-300 text-xs">[DEBATE MODE]</span>' : '';

            return `
                <div class="flex ${alignment} mb-4">
                    <div class="max-w-lg relative ${isDebate}">
                        <div class="rpg-box">
                            <div class="p-4">
                                <div class="flex items-start space-x-3">
                                    <div class="w-12 h-12 flex-shrink-0 border-2 ${avatarBorder} flex items-center justify-center">
                                        ${avatarIcon}
                                    </div>
                                    <div class="flex-1">
                                        <div class="flex items-center mb-2">
                                            <span class="text-white font-bold text-sm tracking-wide">
                                                ★ ${message.speaker}
                                                ${debateTag}
                                            </span>
                                        </div>
                                        <div class="text-white text-sm leading-relaxed font-mono">
                                            <span class="text-yellow-300">★ </span>
                                            ${message.content}
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        ${pointer}
                    </div>
                </div>
            `;
        }

        // Render messages
        function renderMessages() {
            messagesContainer.innerHTML = messages.map(createMessageHTML).join('');
            messagesContainer.scrollTop = messagesContainer.scrollHeight;
        }

        // Show loading state
        function showLoading() {
            const loadingHTML = `
                <div class="flex justify-center mb-4">
                    <div class="rpg-box p-4">
                        <div class="flex items-center space-x-3">
                            <div class="w-12 h-12 border-2 border-gray-400 bg-gray-700 flex items-center justify-center">
                                <div class="w-2 h-2 bg-white animate-ping"></div>
                            </div>
                            <div class="text-white font-mono text-sm">
                                <span class="text-yellow-300">★ </span>
                                Both AIs are thinking<span class="typing-dots"></span>
                            </div>
                        </div>
                    </div>
                </div>
            `;
            messagesContainer.innerHTML += loadingHTML;
            messagesContainer.scrollTop = messagesContainer.scrollHeight;
        }

        // Hide loading state
        function hideLoading() {
            const loadingElements = messagesContainer.querySelectorAll('.flex.justify-center.mb-4');
            if (loadingElements.length > 0) {
                loadingElements[loadingElements.length - 1].remove();
            }
        }

        // Trigger AI debate
        async function triggerAIDebate(goodPrevious, evilPrevious) {
            try {
                const debatePrompt = `The good AI just said: "${goodPrevious}". Respond to this directly, challenging their perspective while staying true to your nature.`;
                
                const evilRebuttal = await callOpenRouterAPI(debatePrompt, 'evil');
                
                const evilDebateMessage = {
                    id: messageIdCounter++,
                    type: 'evil',
                    speaker: 'Abyssal AI',
                    content: evilRebuttal,
                    timestamp: Date.now(),
                    isDebate: true
                };

                messages.push(evilDebateMessage);
                renderMessages();

                // Good AI responds to evil's challenge
                setTimeout(async () => {
                    const goodCounterPrompt = `The evil AI just challenged you with: "${evilRebuttal}". Respond with wisdom and conviction, but remain compassionate.`;
                    
                    const goodCounter = await callOpenRouterAPI(goodCounterPrompt, 'good');
                    
                    const goodDebateMessage = {
                        id: messageIdCounter++,
                        type: 'good',
                        speaker: 'Seraphim AI',
                        content: goodCounter,
                        timestamp: Date.now(),
                        isDebate: true
                    };

                    messages.push(goodDebateMessage);
                    renderMessages();
                }, 1500);
            } catch (error) {
                console.error('Error in AI debate:', error);
            }
        }

        // Send message
        async function sendMessage() {
            const inputText = userInput.value.trim();
            if (!inputText || isLoading) return;

            const userMessage = {
                id: messageIdCounter++,
                type: 'user',
                speaker: 'You',
                content: inputText,
                timestamp: Date.now()
            };

            messages.push(userMessage);
            userInput.value = '';
            isLoading = true;
            sendButton.disabled = true;
            
            renderMessages();
            showLoading();

            try {
                // Get responses from both AIs
                const [goodResponse, evilResponse] = await Promise.all([
                    callOpenRouterAPI(inputText, 'good'),
                    callOpenRouterAPI(inputText, 'evil')
                ]);

                hideLoading();

                // Add good AI response
                const goodMessage = {
                    id: messageIdCounter++,
                    type: 'good',
                    speaker: 'Seraphim AI',
                    content: goodResponse,
                    timestamp: Date.now()
                };

                // Add evil AI response
                const evilMessage = {
                    id: messageIdCounter++,
                    type: 'evil',
                    speaker: 'Abyssal AI',
                    content: evilResponse,
                    timestamp: Date.now() + 1000
                };

                messages.push(goodMessage, evilMessage);
                renderMessages();

                // Sometimes trigger inter-AI conversation
                if (Math.random() < 0.3) {
                    setTimeout(() => triggerAIDebate(goodResponse, evilResponse), 2000);
                }
            } catch (error) {
                console.error('Error getting AI responses:', error);
                hideLoading();
            } finally {
                isLoading = false;
                sendButton.disabled = false;
            }
        }

        // Event listeners
        sendButton.addEventListener('click', sendMessage);
        userInput.addEventListener('keypress', (e) => {
            if (e.key === 'Enter') {
                sendMessage();
            }
        });

        // Initialize
        renderMessages();
        
        // Initialize 3D Models
        function init3DModels() {
            // Good AI Model
            const goodContainer = document.getElementById('good-model-container');
            const goodScene = new THREE.Scene();
            const goodCamera = new THREE.PerspectiveCamera(75, 1, 0.1, 1000);
            const goodRenderer = new THREE.WebGLRenderer({ antialias: true, alpha: true });
            
            goodRenderer.setSize(192, 192); // 48 * 4 (w-48 h-48 from Tailwind)
            goodRenderer.setClearColor(0x000000, 0);
            goodContainer.appendChild(goodRenderer.domElement);
            
            // Add lighting for good model
            const goodAmbientLight = new THREE.AmbientLight(0x4444ff, 0.6);
            const goodDirectionalLight = new THREE.DirectionalLight(0x8888ff, 0.8);
            goodDirectionalLight.position.set(5, 5, 5);
            goodScene.add(goodAmbientLight, goodDirectionalLight);
            
            // Evil AI Model
            const evilContainer = document.getElementById('evil-model-container');
            const evilScene = new THREE.Scene();
            const evilCamera = new THREE.PerspectiveCamera(75, 1, 0.1, 1000);
            const evilRenderer = new THREE.WebGLRenderer({ antialias: true, alpha: true });
            
            evilRenderer.setSize(192, 192);
            evilRenderer.setClearColor(0x000000, 0);
            evilContainer.appendChild(evilRenderer.domElement);
            
            // Add lighting for evil model
            const evilAmbientLight = new THREE.AmbientLight(0xff4444, 0.6);
            const evilDirectionalLight = new THREE.DirectionalLight(0xff8888, 0.8);
            evilDirectionalLight.position.set(5, 5, 5);
            evilScene.add(evilAmbientLight, evilDirectionalLight);
            
            // Load models
            const loader = new THREE.GLTFLoader();
            
            // Load good model
            loader.load(
                GOOD_MODEL_URL,
                function(gltf) {
                    const goodModel = gltf.scene;
                    goodModel.scale.set(2, 2, 2); // Adjust scale as needed
                    goodScene.add(goodModel);
                    
                    // Center the model
                    const box = new THREE.Box3().setFromObject(goodModel);
                    const center = box.getCenter(new THREE.Vector3());
                    goodModel.position.sub(center);
                    
                    goodCamera.position.z = 3;
                    
                    // Animation loop for good model
                    function animateGood() {
                        requestAnimationFrame(animateGood);
                        goodModel.rotation.y += 0.01; // Slow rotation
                        goodRenderer.render(goodScene, goodCamera);
                    }
                    animateGood();
                },
                function(progress) {
                    console.log('Good model loading progress:', (progress.loaded / progress.total * 100) + '%');
                },
                function(error) {
                    console.error('Error loading good model:', error);
                    // Fallback - show loading text
                    goodContainer.innerHTML = '<div class="flex items-center justify-center h-full text-blue-400/50 text-xs">Model Load Error</div>';
                }
            );
            
            // Load evil model
            loader.load(
                EVIL_MODEL_URL,
                function(gltf) {
                    const evilModel = gltf.scene;
                    evilModel.scale.set(2, 2, 2); // Adjust scale as needed
                    evilScene.add(evilModel);
                    
                    // Center the model
                    const box = new THREE.Box3().setFromObject(evilModel);
                    const center = box.getCenter(new THREE.Vector3());
                    evilModel.position.sub(center);
                    
                    evilCamera.position.z = 3;
                    
                    // Animation loop for evil model
                    function animateEvil() {
                        requestAnimationFrame(animateEvil);
                        evilModel.rotation.y -= 0.01; // Slow rotation (opposite direction)
                        evilRenderer.render(evilScene, evilCamera);
                    }
                    animateEvil();
                },
                function(progress) {
                    console.log('Evil model loading progress:', (progress.loaded / progress.total * 100) + '%');
                },
                function(error) {
                    console.error('Error loading evil model:', error);
                    // Fallback - show loading text
                    evilContainer.innerHTML = '<div class="flex items-center justify-center h-full text-red-400/50 text-xs">Model Load Error</div>';
                }
            );
        }
        
        // Initialize 3D models when page loads
        window.addEventListener('load', init3DModels);
    </script>
</body>
</html>
